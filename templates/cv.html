<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>GEWOD</title>
	<script src="{{url_for('static', filename='bower_components/tracking/build/tracking.js')}}" type="text/javascript" charset="utf-8"></script>
</head>

<body>
<div id="demo-container">
	<img id="test_img" src="{{url_for('static', filename='test_img.jpg')}}" alt="" height="800px;" width="900px;">
	<canvas id="canvas" height="800px" width="900px" ></canvas>	
</div>


<script>	
// Constructor
var MyTracker = function() {
	MyTracker.base(this, 'constructor');
}
tracking.inherits(MyTracker, tracking.Tracker);

var context = canvas.getContext('2d');

MyTracker.prototype.track = function(pixels, width, height) {
	var mat = tracking.Matrix.constructor();
	mat.pixels = pixels;
	mat.width = width;
	mat.height = height;
	// console.log(width);
	// console.log(height);
	// console.log( mat.pixels[900, 100000] );
	this.emit('track', {
		// width
		mat
	});
}

var tracker = new MyTracker();

tracker.on('track', function(mat) {
	context.clearRect(0, 0, canvas.width, canvas.height);
  // Results are inside the event
  	console.log(mat);
  	context.strokeStyle = '#a64ceb';
	context.strokeRect(0, 0, 100, 100);
	context.font = '11px Helvetica';
	context.fillStyle = "#fff";
});

tracking.track('#test_img', tracker);

</script>

</body>
</html>